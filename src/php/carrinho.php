<?php session_start(); require_once '../../backend/config/db.php'; // Inicializa o carrinho if (!isset($_SESSION['carrinho'])) { $_SESSION['carrinho'] = []; } // Adicionar item if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['produto_id'])) { $produto_id = $_POST['produto_id']; $_SESSION['carrinho'][] = $produto_id; } // Buscar dados dos produtos do carrinho $ids = implode(',', $_SESSION['carrinho']); $produtos = []; if ($ids) { $stmt = $conn->query("SELECT * FROM produtos WHERE id IN ($ids)"); $produtos = $stmt->fetchAll(PDO::FETCH_ASSOC); } ?> <?php include 'includes/header.php'; ?> <?php include 'includes/navbar.php'; ?> <main> <section class="carrinho"> <h2>Seu Carrinho</h2> <?php if (empty($produtos)): ?> <p>Seu carrinho est√° vazio.</p> <?php else: ?> <ul> <?php foreach ($produtos as $p): ?> <li> <img src="../../assets/<?= htmlspecialchars($p['imagem']) ?>" width="80"> <?= htmlspecialchars($p['nome']) ?> - R$ <?= number_format($p['preco'], 2, ',', '.') ?> </li> <?php endforeach; ?> </ul> <button>Finalizar Compra</button> <?php endif; ?> </section> </main> <?php include 'includes/footer.php'; ?>